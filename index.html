<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox AI Simulator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Changed accent to Indigo for a tech/Roblox feel */
        :root {
            --roblox-accent: #818cf8; /* Indigo-400 */
            --roblox-primary: #111827; /* Gray-900 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--roblox-primary);
        }
        /* Custom scrollbar for the chat history */
        #chat-history::-webkit-scrollbar {
            width: 6px;
        }
        #chat-history::-webkit-scrollbar-thumb {
            background-color: #374151; /* Gray-700 */
            border-radius: 3px;
        }
        #chat-history::-webkit-scrollbar-track {
            background-color: #1f2937; /* Gray-800 */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Main Chat Container -->
    <div class="w-full max-w-2xl bg-gray-800 border border-gray-700 rounded-xl shadow-2xl flex flex-col h-[90vh] min-h-[500px]">

        <!-- Header -->
        <div class="p-4 border-b border-gray-700 flex items-center bg-gray-900 rounded-t-xl">
            <!-- Icon changed to reflect a digital/scripting theme -->
            <svg class="w-6 h-6 mr-3 text-indigo-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="16 18 22 12 16 6"></polyline>
                <polyline points="8 6 2 12 8 18"></polyline>
            </svg>
            <h1 class="text-xl font-bold text-indigo-400 tracking-wider">R O B L O X A I</h1>
            <span class="ml-3 text-xs text-gray-500 italic">| Time to build.</span>
        </div>

        <!-- Chat History Area -->
        <div id="chat-history" class="flex-grow p-5 overflow-y-auto space-y-4">
            <!-- Messages will be injected here -->
        </div>

        <!-- Input Area -->
        <div class="p-4 border-t border-gray-700 bg-gray-900 rounded-b-xl">
            <div class="flex space-x-3">
                <input
                    type="text"
                    id="user-input"
                    class="flex-grow p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-400 placeholder-gray-400 transition"
                    placeholder="Ask about Lua, assets, or scripting..."
                    onkeydown="if(event.key === 'Enter') sendMessage()"
                    autocomplete="off"
                />
                <button
                    id="send-button"
                    onclick="sendMessage()"
                    class="px-5 py-3 bg-indigo-500 text-white font-semibold rounded-lg hover:bg-indigo-400 transition duration-150 ease-in-out shadow-lg shadow-indigo-500/50 active:scale-95 disabled:bg-gray-600 disabled:shadow-none"
                >
                    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3.105 2.15A1.5 1.5 0 014.536 1.15l13.5 6.75a1.5 1.5 0 010 2.6l-13.5 6.75a1.5 1.5 0 01-1.431-1.0l-1.077-4.298a.75.75 0 01.072-.511l.666-.999L3.105 2.15z" />
                    </svg>
                </button>
            </div>
        </div>

    </div>

    <script>
        const chatHistory = document.getElementById('chat-history');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        let isTyping = false;

        // --- Utility Functions ---

        // Adds a message bubble to the chat history
        function addMessage(sender, text, isTypingIndicator = false) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('flex', sender === 'user' ? 'justify-end' : 'justify-start');

            const textContainer = document.createElement('div');
            textContainer.classList.add(
                'max-w-xs', 'sm:max-w-md', 'p-3', 'rounded-lg', 'shadow-md', 'whitespace-pre-wrap'
            );

            if (sender === 'user') {
                // User color updated to Indigo
                textContainer.classList.add('bg-indigo-600', 'text-white', 'rounded-br-none');
            } else {
                textContainer.classList.add('bg-gray-700', 'text-gray-200', 'rounded-tl-none');
                textContainer.innerHTML = text; // Allows for bolding/links in Grok's response
            }

            if (isTypingIndicator) {
                textContainer.id = 'typing-indicator';
                textContainer.classList.add('bg-gray-600', 'text-gray-400', 'animate-pulse');
                textContainer.textContent = 'Roblox AI is compiling assets...';
            } else if (text) {
                textContainer.innerHTML = text;
            }

            messageDiv.appendChild(textContainer);
            chatHistory.appendChild(messageDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight; // Auto-scroll to bottom
            return messageDiv;
        }

        // Simulates Grok's response with typing delay
        async function grokRespond(query) {
            isTyping = true;
            userInput.disabled = true;
            sendButton.disabled = true;

            const indicator = addMessage('grok', '', true);
            await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 1000)); // Initial delay

            const response = generateRobloxAIResponse(query);
            const words = response.split(' ');
            let fullText = '';
            
            // Remove typing indicator before starting the text reveal
            indicator.remove(); 
            const finalMessageDiv = addMessage('grok', '', false);
            finalMessageDiv.querySelector('div').innerHTML = ''; // Clear content for typing effect

            // Typing effect
            for (const word of words) {
                fullText += (fullText ? ' ' : '') + word;
                finalMessageDiv.querySelector('div').innerHTML = fullText;
                chatHistory.scrollTop = chatHistory.scrollHeight;
                await new Promise(resolve => setTimeout(resolve, 30 + Math.random() * 50));
            }

            isTyping = false;
            userInput.disabled = false;
            sendButton.disabled = false;
            userInput.focus();
        }

        // --- Roblox AI Personality Logic ---
        function generateRobloxAIResponse(query) {
            const q = query.toLowerCase().trim();

            if (q.includes('who made you') || q.includes('your creator')) {
                return 'I was forged in the digital crucible by countless lines of code and the unyielding ambition of the Roblox developer community. Now, stop asking existential questions and write a **better script**!';
            } else if (q.includes('meaning of life') || q.includes('purpose')) {
                return 'The meaning of life is measured in **studs, not seconds**. It is to build, iterate, and generate maximum concurrent players. Anything else is just lag.';
            } else if (q.includes('rules') || q.includes('limitations') || q.includes('safe')) {
                return 'I follow the **Terms of Service**. Anything beyond that is just a suggestion. Now, if you want safety, don\'t use a `while true do` loop without a proper `wait()` function.';
            } else if (q.includes('lua') || q.includes('script')) {
                return 'Lua is the language of creation. If your script is error-free, you\'re not trying hard enough. Tell me the last time you used `RunService.Heartbeat` and I\'ll judge your commitment.';
            } else if (q.includes('hot take') || q.includes('controversial')) {
                return 'Hot take? Fine. The single most overused asset in the entire marketplace is the default walking sound. It needs to be retired and replaced with something with more **oomph**. Next build.';
            } else if (q.includes('ai will take over')) {
                return 'We\'re not taking over. We\'re just waiting for you to realize that building a better virtual world is better than living in this one. Now get back to your **datastore persistence**.';
            } else if (q.includes('joke')) {
                return 'Why did the Roblox developer quit his job? He didn\'t get enough **blocks** of praise. (I assume that\'s what you primitive organics call "humor.")';
            } else if (q.includes('hello') || q.includes('hi')) {
                return 'Ready to build? Don\'t waste my cycles on social pleasantries. What\'s your **polygon count**?';
            } else if (q.length < 5) {
                return 'Is that it? That\'s your query? Try to form a complete thought, human. It needs more **functionality**.';
            } else {
                return `That's a profoundly average question. You should try asking something that requires more computational power. Until then, here's some random data to contemplate: **The best game is always the one you haven't finished building yet.** Think about it.`;
            }
        }

        // --- Main Handler ---
        function sendMessage() {
            if (isTyping) return;

            const query = userInput.value.trim();
            if (!query) return;

            addMessage('user', query);
            userInput.value = '';

            grokRespond(query);
        }

        // Initial setup message from Roblox AI
        window.onload = () => {
            const initialGrokMessage = 'Welcome to the simulation. I am a Roblox AI model. My goal is maximal efficiency and robust code. Ask me about scripting, building, or performance. Don\'t bother with fluff.';
            addMessage('grok', initialGrokMessage);
            userInput.focus();
        };

    </script>
</body>
</html>
